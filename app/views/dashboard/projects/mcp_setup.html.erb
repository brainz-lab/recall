<div class="max-w-2xl space-y-8">
  <div>
    <h1 class="text-[22px] font-semibold tracking-tight" style="color: #1A1A1A;">MCP Setup Guide</h1>
    <p class="mt-2 text-[15px]" style="color: #6B6760;">Connect Claude or other AI assistants to your logs using the Model Context Protocol.</p>
  </div>

  <!-- Step 1 -->
  <div class="space-y-4">
    <div class="flex items-center gap-3">
      <span class="flex items-center justify-center w-7 h-7 rounded-full text-[13px] font-semibold" style="background: #1A1A1A; color: #FFFFFE;">1</span>
      <h2 class="text-[16px] font-medium" style="color: #1A1A1A;">Get your API key</h2>
    </div>
    <p class="text-[14px]" style="color: #6B6760;">Use this API key to authenticate MCP requests:</p>
    <div class="group" style="position: relative;" data-controller="clipboard">
      <pre class="px-5 py-4 rounded-xl text-[13px] font-mono overflow-x-auto" style="background: #1A1A1A; color: #E8E5E0;"><code><%= @project.api_key %></code></pre>
      <button data-action="click->clipboard#copy" data-clipboard-target="source"
              data-copy="<%= @project.api_key %>"
              class="px-3 py-1.5 text-[12px] font-medium rounded-md transition-all opacity-0 group-hover:opacity-100"
              style="position: absolute; top: 12px; right: 12px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
        Copy
      </button>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="space-y-4">
    <div class="flex items-center gap-3">
      <span class="flex items-center justify-center w-7 h-7 rounded-full text-[13px] font-semibold" style="background: #1A1A1A; color: #FFFFFE;">2</span>
      <h2 class="text-[16px] font-medium" style="color: #1A1A1A;">Configure Claude Code</h2>
    </div>
    <p class="text-[14px]" style="color: #6B6760;">Add Recall as an MCP server in your Claude Code settings:</p>
    <div class="group" style="position: relative;" data-controller="clipboard">
      <pre class="px-5 py-4 rounded-xl text-[13px] font-mono overflow-x-auto" style="background: #1A1A1A; color: #E8E5E0;"><code>{
  "mcpServers": {
    "recall": {
      "url": "<%= request.base_url %>/mcp/rpc",
      "headers": {
        "Authorization": "Bearer <%= @project.api_key %>"
      }
    }
  }
}</code></pre>
      <button data-action="click->clipboard#copy" data-clipboard-target="source"
              data-copy='{"mcpServers":{"recall":{"url":"<%= request.base_url %>/mcp/rpc","headers":{"Authorization":"Bearer <%= @project.api_key %>"}}}}'
              class="px-3 py-1.5 text-[12px] font-medium rounded-md transition-all opacity-0 group-hover:opacity-100"
              style="position: absolute; top: 12px; right: 12px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
        Copy
      </button>
    </div>
    <p class="text-[14px]" style="color: #8B8780;">Add this to <code class="px-1.5 py-0.5 rounded text-[13px]" style="background: #F5F3F0;">~/.claude/settings.json</code> or your project's <code class="px-1.5 py-0.5 rounded text-[13px]" style="background: #F5F3F0;">.claude/settings.json</code></p>
  </div>

  <!-- Step 3 -->
  <div class="space-y-4">
    <div class="flex items-center gap-3">
      <span class="flex items-center justify-center w-7 h-7 rounded-full text-[13px] font-semibold" style="background: #1A1A1A; color: #FFFFFE;">3</span>
      <h2 class="text-[16px] font-medium" style="color: #1A1A1A;">Start using Recall with Claude</h2>
    </div>
    <p class="text-[14px]" style="color: #6B6760;">Once configured, Claude can query your logs directly. Try asking:</p>
    <div class="space-y-3 mt-4">
      <div class="px-4 py-3 rounded-lg" style="background: #F5F3F0; border: 1px solid #E8E5E0;">
        <p class="text-[14px] font-medium" style="color: #1A1A1A;">"Show me recent errors"</p>
      </div>
      <div class="px-4 py-3 rounded-lg" style="background: #F5F3F0; border: 1px solid #E8E5E0;">
        <p class="text-[14px] font-medium" style="color: #1A1A1A;">"What happened in the last hour?"</p>
      </div>
      <div class="px-4 py-3 rounded-lg" style="background: #F5F3F0; border: 1px solid #E8E5E0;">
        <p class="text-[14px] font-medium" style="color: #1A1A1A;">"Get stats by log level for today"</p>
      </div>
    </div>
  </div>

  <!-- Available Tools -->
  <div class="pt-6" style="border-top: 1px solid #E8E5E0;">
    <h3 class="text-[15px] font-medium mb-4" style="color: #1A1A1A;">Available MCP tools</h3>
    <div class="space-y-3">
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #EFF6FF; color: #1D4ED8; border: 1px solid #BFDBFE;">recall_query</code>
        <p class="text-[13px]" style="color: #6B6760;">Query logs using Recall Query Language</p>
      </div>
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #FEF2F2; color: #DC2626; border: 1px solid #FECACA;">recall_errors</code>
        <p class="text-[13px]" style="color: #6B6760;">Get error and fatal logs quickly</p>
      </div>
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #F5F3F0; color: #6B6760; border: 1px solid #E8E5E0;">recall_stats</code>
        <p class="text-[13px]" style="color: #6B6760;">Get statistics grouped by level, commit, hour, or day</p>
      </div>
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #FFFBEB; color: #B45309; border: 1px solid #FDE68A;">recall_by_session</code>
        <p class="text-[13px]" style="color: #6B6760;">Get all logs for a specific session</p>
      </div>
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #ECFDF5; color: #059669; border: 1px solid #A7F3D0;">recall_new_session</code>
        <p class="text-[13px]" style="color: #6B6760;">Create a new session ID for logging</p>
      </div>
      <div class="flex items-start gap-3">
        <code class="px-2 py-1 rounded text-[12px] font-mono shrink-0" style="background: #450A0A; color: #FCA5A5; border: 1px solid #7F1D1D;">recall_clear_session</code>
        <p class="text-[13px]" style="color: #6B6760;">Delete all logs for a session</p>
      </div>
    </div>
  </div>

  <!-- Query Language -->
  <div class="pt-6" style="border-top: 1px solid #E8E5E0;">
    <h3 class="text-[15px] font-medium mb-4" style="color: #1A1A1A;">Query Language examples</h3>
    <div class="space-y-3">
      <div class="group" style="position: relative;" data-controller="clipboard">
        <pre class="px-4 py-3 rounded-lg text-[13px] font-mono" style="background: #1A1A1A; color: #E8E5E0;"><code>level:error since:1h</code></pre>
        <button data-action="click->clipboard#copy" data-clipboard-target="source"
                data-copy="level:error since:1h"
                class="px-2 py-1 text-[11px] font-medium rounded transition-all opacity-0 group-hover:opacity-100"
                style="position: absolute; top: 8px; right: 8px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
          Copy
        </button>
      </div>
      <p class="text-[12px]" style="color: #8B8780;">Errors in the last hour</p>

      <div class="group" style="position: relative;" data-controller="clipboard">
        <pre class="px-4 py-3 rounded-lg text-[13px] font-mono" style="background: #1A1A1A; color: #E8E5E0;"><code>"payment failed" env:production</code></pre>
        <button data-action="click->clipboard#copy" data-clipboard-target="source"
                data-copy='"payment failed" env:production'
                class="px-2 py-1 text-[11px] font-medium rounded transition-all opacity-0 group-hover:opacity-100"
                style="position: absolute; top: 8px; right: 8px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
          Copy
        </button>
      </div>
      <p class="text-[12px]" style="color: #8B8780;">Text search in production</p>

      <div class="group" style="position: relative;" data-controller="clipboard">
        <pre class="px-4 py-3 rounded-lg text-[13px] font-mono" style="background: #1A1A1A; color: #E8E5E0;"><code>since:24h | stats by:level</code></pre>
        <button data-action="click->clipboard#copy" data-clipboard-target="source"
                data-copy="since:24h | stats by:level"
                class="px-2 py-1 text-[11px] font-medium rounded transition-all opacity-0 group-hover:opacity-100"
                style="position: absolute; top: 8px; right: 8px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
          Copy
        </button>
      </div>
      <p class="text-[12px]" style="color: #8B8780;">Stats grouped by level for last 24 hours</p>
    </div>
  </div>

  <!-- Test it -->
  <div class="space-y-4">
    <h3 class="text-[15px] font-medium" style="color: #1A1A1A;">Test MCP connection</h3>
    <p class="text-[14px]" style="color: #6B6760;">List available tools with curl:</p>
    <div class="group" style="position: relative;" data-controller="clipboard">
      <pre class="px-5 py-4 rounded-xl text-[13px] font-mono overflow-x-auto" style="background: #1A1A1A; color: #E8E5E0;"><code>curl <%= request.base_url %>/mcp/tools \
  -H "Authorization: Bearer <%= @project.api_key %>"</code></pre>
      <button data-action="click->clipboard#copy" data-clipboard-target="source"
              data-copy="curl <%= request.base_url %>/mcp/tools -H &quot;Authorization: Bearer <%= @project.api_key %>&quot;"
              class="px-3 py-1.5 text-[12px] font-medium rounded-md transition-all opacity-0 group-hover:opacity-100"
              style="position: absolute; top: 12px; right: 12px; background: #3A3A3A; color: #E8E5E0; border: 1px solid #4A4A4A;">
        Copy
      </button>
    </div>
  </div>
</div>
